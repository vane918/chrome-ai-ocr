<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chrome OCR 设置</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <rect width="32" height="32" rx="8" fill="#6366f1"/>
          <text x="16" y="22" text-anchor="middle" fill="white" font-size="16" font-weight="bold" font-family="Helvetica, Arial, sans-serif">T</text>
        </svg>
        <h1>Chrome OCR 设置</h1>
      </div>
    </header>

    <main>
      <section class="card">
        <h2>API 配置</h2>

        <div class="form-group">
          <label for="provider">AI 服务提供商</label>
          <select id="provider">
            <option value="gemini">Google Gemini</option>
            <option value="qwen">通义千问（阿里云百炼）</option>
          </select>
        </div>

        <!-- Gemini API Key -->
        <div class="form-group" id="geminiKeyGroup">
          <label for="apiKey">Gemini API Key</label>
          <div class="input-wrapper">
            <input
              type="password"
              id="apiKey"
              placeholder="请输入您的 Gemini API Key（AIza...）"
              autocomplete="off"
              spellcheck="false"
            >
            <button type="button" id="toggleApiKey" class="toggle-btn" title="显示/隐藏 API Key">
              <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
          <p class="hint">
            前往 <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a> 获取免费 API Key
          </p>
        </div>

        <!-- 通义千问 API Key -->
        <div class="form-group" id="qwenKeyGroup" style="display:none">
          <label for="qwenApiKey">DashScope API Key</label>
          <div class="input-wrapper">
            <input
              type="password"
              id="qwenApiKey"
              placeholder="请输入您的 DashScope API Key（sk-...）"
              autocomplete="off"
              spellcheck="false"
            >
            <button type="button" id="toggleQwenApiKey" class="toggle-btn" title="显示/隐藏 API Key">
              <svg class="eye-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
          <p class="hint">
            前往 <a href="https://bailian.console.aliyun.com/" target="_blank">阿里云百炼控制台</a> 获取 API Key
          </p>
        </div>

        <div class="form-group">
          <label for="model">识别模型</label>
          <select id="model">
            <!-- 由 JS 动态填充 -->
          </select>
        </div>

        <div class="form-group">
          <label for="prompt">OCR 提示词（高级）</label>
          <textarea id="prompt" rows="5" placeholder="自定义识别提示词..."></textarea>
          <button type="button" id="resetPrompt" class="link-btn">恢复默认提示词</button>
        </div>
      </section>

      <div class="actions">
        <button id="saveBtn" class="btn-primary">保存设置</button>
        <span id="saveStatus" class="save-status"></span>
      </div>
    </main>
  </div>

  <script src="options.js"></script>
</body>
</html>
